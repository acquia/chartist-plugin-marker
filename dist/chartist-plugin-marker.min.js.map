{"version":3,"sources":["chartist-plugin-marker.js"],"names":["root","factory","define","amd","returnExportsGlobal","exports","module","this","window","document","Chartist","CtMarker","options","extend","defaultOptions","chart","Line","on","data","verticalMarker","seriesName","series","name","chartHeight","svg","height","length","indexOf","type","value","y","threshold","element","attr","y1","axisX","offset","chartPadding","bottom","y2","addClass","classNames","markerPointClass","values","remove","i","len","undefined","Svg","x1","projectValue","x","axisY","left","top","x2","markerLineClass","group","append","markerClass","plugins","ctMarker"],"mappings":";;;;;;CAAC,SAAUA,EAAMC,GACO,kBAAXC,SAAyBA,OAAOC,IAEzCD,UAAW,WACT,MAAQF,GAAKI,oBAAsBH,MAET,gBAAZI,SAIhBC,OAAOD,QAAUJ,IAEjBD,EAAK,6BAA+BC,KAEtCM,KAAM,WAoGN,MA3FC,UAASC,EAAQC,EAAUC,GAC1B,YAEA,IAAIC,GAAW,SAASC,GAItB,MAFAA,GAAUF,EAASG,UAAWC,EAAgBF,GAEvC,SAAkBG,GAEnBA,YAAiBL,GAASM,MAE5BD,EAAME,GAAG,OAAQ,SAAUC,GAEzB,GAAIC,GACAC,EAAaF,EAAKG,QAAUH,EAAKG,OAAOC,KAAOJ,EAAKG,OAAOC,KAAO,KAClEC,EAAcR,EAAMS,IAAIC,QAE5B,IAA8B,IAA1Bb,EAAQS,OAAOK,QAAuD,KAAvCd,EAAQS,OAAOM,QAAQP,GAAoB,CAG5E,GAAkB,UAAdF,EAAKU,MAAoBV,EAAKW,MAAMC,EAAIlB,EAAQmB,UAGlDb,EAAKc,QACFC,MACCC,GAAIX,EAAcR,EAAMH,QAAQuB,MAAMC,OAASrB,EAAMH,QAAQyB,aAAaC,OAC1EC,GAAIhB,EAAcR,EAAMH,QAAQuB,MAAMC,OAASrB,EAAMH,QAAQyB,aAAaC,SAE3EE,SAAS5B,EAAQ6B,WAAWC,sBAI5B,IAAkB,SAAdxB,EAAKU,MAAmBV,EAAKyB,OAAOjB,OAAQ,CAGnDR,EAAKc,QAAQY,QAGb,KAAK,GAAIC,GAAI,EAAGC,EAAM5B,EAAKyB,OAAOjB,OAAYoB,EAAJD,EAASA,IAE1BE,SAAnB7B,EAAKyB,OAAOE,IAAoB3B,EAAKyB,OAAOE,GAAGf,EAAIlB,EAAQmB,YAG7DZ,EAAiBT,EACdsC,IAAI,QACHC,GAAI/B,EAAKiB,MAAMe,aAAahC,EAAKyB,OAAOE,GAAGM,EAAGN,GAAK9B,EAAMH,QAAQwC,MAAMhB,OAASrB,EAAMH,QAAQyB,aAAagB,KAC3GnB,GAAI,EAAInB,EAAMH,QAAQyB,aAAaiB,IACnCC,GAAIrC,EAAKiB,MAAMe,aAAahC,EAAKyB,OAAOE,GAAGM,EAAGN,GAAK9B,EAAMH,QAAQwC,MAAMhB,OAASrB,EAAMH,QAAQyB,aAAagB,KAC3Gd,GAAIhB,EAAcR,EAAMH,QAAQuB,MAAMC,OAASrB,EAAMH,QAAQyB,aAAaC,QACzE,WACFE,SAAS5B,EAAQ6B,WAAWe,iBAG/BtC,EAAKuC,MAAMC,OAAOvC,QAOD,SAAdD,EAAKU,MAAiC,UAAdV,EAAKU,MACpCV,EAAKc,QAAQY,QAIf1B,GAAKuC,MAAMjB,SAAS5B,EAAQ6B,WAAWkB,kBAW7C7C,GACFO,UACAU,UAAW,EACXU,YACEkB,YAAa,YACbjB,iBAAkB,kBAClBc,gBAAiB,kBAIrB9C,GAASkD,QAAUlD,EAASkD,YAC5BlD,EAASkD,QAAQC,SAAWlD,GAE5BH,OAAQC,SAAUC,UAEbA,SAASkD,QAAQC","file":"chartist-plugin-marker.min.js","sourcesContent":["(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], function () {\n      return (root.returnExportsGlobal = factory());\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like enviroments that support module.exports,\n    // like Node.\n    module.exports = factory();\n  } else {\n    root['Chartist.plugins.ctMarker'] = factory();\n  }\n}(this, function () {\n\n  /**\n   * Chartist.js plugin to display a series of data as vertical markers in a line\n   * chart.\n   *\n   */\n\n  /* global Chartist */\n  (function(window, document, Chartist) {\n    'use strict';\n\n    var CtMarker = function(options) {\n\n      options = Chartist.extend({}, defaultOptions, options);\n\n      return function ctMarker(chart) {\n\n        if (chart instanceof Chartist.Line) {\n\n          chart.on('draw', function (data) {\n\n            var verticalMarker,\n                seriesName = data.series && data.series.name ? data.series.name : null,\n                chartHeight = chart.svg.height();\n\n            if (options.series.length === 0 || options.series.indexOf(seriesName) !== -1) {\n\n              // Move points to bottom of the charts.\n              if (data.type === 'point' && data.value.y > options.threshold) {\n\n                // Alter the existing marker point position to the bottom of the chart.\n                data.element\n                  .attr({\n                    y1: chartHeight - chart.options.axisX.offset - chart.options.chartPadding.bottom,\n                    y2: chartHeight - chart.options.axisX.offset - chart.options.chartPadding.bottom\n                  })\n                  .addClass(options.classNames.markerPointClass);\n\n              }\n              // Convert existing line area to vertical markers.\n              else if (data.type === 'line' && data.values.length) {\n\n                // Remove the original line path.\n                data.element.remove();\n\n                // Iterate over values and create vertical markers.\n                for (var i = 0, len = data.values.length; i < len; i++) {\n\n                  if (data.values[i] !== undefined && data.values[i].y > options.threshold) {\n\n                    // Create vertical marker line.\n                    verticalMarker = Chartist\n                      .Svg('line', {\n                        x1: data.axisX.projectValue(data.values[i].x, i) + chart.options.axisY.offset + chart.options.chartPadding.left,\n                        y1: 0 + chart.options.chartPadding.top,\n                        x2: data.axisX.projectValue(data.values[i].x, i) + chart.options.axisY.offset + chart.options.chartPadding.left,\n                        y2: chartHeight - chart.options.axisX.offset - chart.options.chartPadding.bottom\n                      }, 'ct-line')\n                      .addClass(options.classNames.markerLineClass);\n\n                    // Append vertical markerline to SVG group.\n                    data.group.append(verticalMarker);\n\n                  }\n                }\n\n              }\n              // Remove all other data except grids and labels.\n              else if (data.type !== 'grid' && data.type !== 'label') {\n                data.element.remove();\n              }\n\n              // Add the marker class to the group.\n              data.group.addClass(options.classNames.markerClass);\n\n            }\n          });\n\n        }\n\n      };\n\n    };\n\n    var defaultOptions = {\n      series: [],\n      threshold: 0,\n      classNames: {\n        markerClass: 'ct-marker',\n        markerPointClass: 'ct-marker-point',\n        markerLineClass: 'ct-marker-line'\n      }\n    };\n\n    Chartist.plugins = Chartist.plugins || {};\n    Chartist.plugins.ctMarker = CtMarker;\n\n  }(window, document, Chartist));\n\n  return Chartist.plugins.ctMarker;\n\n}));\n"]}